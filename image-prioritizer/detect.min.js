export const name="Image Prioritizer";export async function initialize({log:e,onLCP:t,extendRootData:n}){t((t=>{handleLCPMetric(t,n,e)}),{reportAllChanges:!0})}function handleLCPMetric(e,t,n){for(const i of e.entries){if(!i.url||!(i.element instanceof HTMLElement)||i.element instanceof HTMLImageElement||i.element instanceof HTMLVideoElement)continue;if(i.url.startsWith("data:"))continue;if(i.element.style.backgroundImage)continue;if(i.url.length>500)return void n(`Skipping very long URL: ${i.url}`);if(i.element.tagName.length>100)return void n(`Skipping very long tag name: ${i.element.tagName}`);const e=i.element.getAttribute("id");if("string"==typeof e&&e.length>100)return void n(`Skipping very long ID: ${e}`);const l=i.element.getAttribute("class");if("string"==typeof l&&l.length>500)return void n(`Skipping very long className: ${l}`);const r={url:i.url,tag:i.element.tagName,id:e,class:l};n("Detected external LCP background image:",r),t({lcpElementExternalBackgroundImage:r})}}